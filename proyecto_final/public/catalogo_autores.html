<html>
    <head>
        <title>Catálogo Autores</title>
        <link rel="stylesheet" type="text/css" href="CSS/catalogo_autores.css"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/31355f9613.js" crossorigin="anonymous"></script>
    </head>

    <body onload="cargarTabla()">

        <!-- Logo y Menu -->
        <div class="contenedor">
            <div class="logo-menu" >
                <a href="index.html"><img class="logo" src="img/logo.png"/></a>
            </div>

            <div class="menu-top">
                <a href="sobreNosotros.html">SOBRE NOSOTROS</a>
                <a href="display_libros.html">LIBROS</a>
                <a href="socios_comerciales.html">SOCIOS COMERCIALES</a>
                <a href="formulario_cliente_frecuente.html">CLIENTE FRECUENTE</a>
                <a href="iniciar_sesion.html">INICIAR SESIÓN</a>
                <a href="preguntasFrecuentes.html">PREGUNTAS FRECUENTES</a>
                <a href="contacto.html">CONTACTO</a>
            </div>
        </div>

        <!-- Busqueda, Perfil y Carrito -->

        <div class="button">
            <a class="button2" href="perfil_admin.html"><i class="fa-solid fa-user"></i></a>
        </div>

        <!-- Título -->
        <div class="titulo">
            <h1>CATÁLOGO DE AUTORES</h1>
        </div>

        <!-- Libros agregados -->
        <div class="libros contenedor">
            <div>
            <table class="" id="librosAgregados">
                <tr>
                  <td class="tabla-titulos">ID</td>
                  <td class="tabla-titulos">NOMBRE</td>
                  <td class="tabla-titulos">PAÍS</td>
                  <td class="tabla-titulos">GÉNERO</td>
                  <td class="tabla-titulos">LIBROS</td>
                  <td class="tabla-titulos">PREMIOS</td>
                  <td class="tabla-titulos">EDITAR</td>
                </tr>
              </table>
            </div>

            <!-- Boton -->

            <div class="agregar">
                <button onclick="muestra()" class="button-sesion">AGREGAR NUEVO AUTOR</button>
            </div>
        </div>

        <div id="nuevo-autor" class="oculto nuevo-libro">
            <!-- Título -->
            <div class="titulo2">
                <h1>NUEVO AUTOR</h1>
            </div>

            <!--  -->

            <form class="crear-cuenta">

                <input type="text" id="nombreCompleto" placeholder="NOMBRE COMPLETO" class="inputs"> <br><br/>
                
                <input type="text" id="paisNacimiento" placeholder="PAÍS DE NACIMIENTO" class="inputs"> <br><br/>
                
                <label class="text-morado" for="fechaNacimiento">FECHA DE NACIMIENTO</label><br>
                <input type="date" id="fechaNacimiento" class="inputs"> <br><br/>

                <label class="text-morado" for="fechaDefuncion">FECHA DE DEFUNCIÓN</label><br>
                <input type="date" id="fechaDefuncion" class="inputs"> <br><br/>

                <label class="text-morado" for="genero">GÉNERO</label><br>
                <select class="select" id="genero">
                    <option></option>
                    <option>ARTE</option>
                    <option>CIENCIA</option>
                    <option>DISEÑO</option>
                    <option>FANTASÍA</option>
                    <option>FILOSOFÍA</option>
                    <option>GASTRONOMÍA</option>
                    <option>NIÑOS</option>
                    <option>NOVELAS</option>
                    <option>SALUD Y EJERCICIO</option>
                    <option>VIAJES</option>
                </select><br><br/>
    
                <label class="text-morado" for="librosPublicados">LIBROS</label><br>
                <textarea class="text-areas" id="librosPublicados"></textarea> <br>
                
                <input type="text" placeholder="PREMIOS" class="inputs" id="premios"> <br><br/>

                <input type="text" placeholder="AÑO PREMIO NOBEL" class="inputs" id="nobelFecha"> <br><br/>

                <p class="text-morado">AGREGAR FOTO DE AUTOR</p>
                <input class="button-foto" type="file" placeholder="IMAGEN" id="imagen"> <br><br/>

                <label class="text-morado" for="resena">RESEÑA</label><br>
                <textarea class="text-areas" id="resena"></textarea> <br>
                    
                <button onclick="insertarAutor()" class="button-crear">AGREGAR AUTOR</button>
            </form>
        </div>

        <!-- EDITAR AUTOR -->

        <div id="editar-autor" class="oculto nuevo-libro">
            <!-- Título -->
            <div class="titulo2">
                <h1>EDITAR AUTOR</h1>
            </div>

            <!--  -->

            <form class="crear-cuenta">

                <input type="text" id="_id" placeholder="ID" class="inputs"> <br><br/>

                <input type="text" id="nombreCompleto2" placeholder="NOMBRE COMPLETO" class="inputs"> <br><br/>
                
                <input type="text" id="paisNacimiento2" placeholder="PAÍS DE NACIMIENTO" class="inputs"> <br><br/>
                
                <label class="text-morado" for="fechaNacimiento2">FECHA DE NACIMIENTO</label><br>
                <input type="date" id="fechaNacimiento2" class="inputs"> <br><br/>

                <label class="text-morado" for="fechaDefuncion2">FECHA DE DEFUNCIÓN</label><br>
                <input type="date" id="fechaDefuncion2" class="inputs"> <br><br/>

                <label class="text-morado" for="genero2">GÉNERO</label><br>
                <select class="select" id="genero2">
                    <option></option>
                    <option>ARTE</option>
                    <option>CIENCIA</option>
                    <option>DISEÑO</option>
                    <option>FANTASÍA</option>
                    <option>FILOSOFÍA</option>
                    <option>GASTRONOMÍA</option>
                    <option>NIÑOS</option>
                    <option>NOVELAS</option>
                    <option>SALUD Y EJERCICIO</option>
                    <option>VIAJES</option>
                </select><br><br/>
    
                <label class="text-morado" for="librosPublicados2">LIBROS</label><br>
                <textarea class="text-areas" id="librosPublicados2"></textarea> <br>
                
                <input type="text" placeholder="PREMIOS" class="inputs" id="premios2"> <br><br/>

                <input type="text" placeholder="AÑO PREMIO NOBEL" class="inputs" id="nobelFecha2"> <br><br/>

                <p class="text-morado">AGREGAR FOTO DE AUTOR</p>
                <input class="button-foto" type="file" placeholder="IMAGEN" id="imagen2"> <br><br/>

                <label class="text-morado" for="resena2">RESEÑA</label><br>
                <textarea class="text-areas" id="resena2"></textarea> <br>
                    
                <button onclick="actualizarAutor()" class="button-crear">ACTUALIZAR AUTOR</button>
            </form>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="social">
                <img class="logos-social" src="img/facebook.png"/> 
                <img class="logos-social"src="img/instagram.png"/> 
                <img class="logos-social" src="img/twitter.png"/> 
            </div>
            <h4>LIBRERIA@HOTMAIL.COM</h4>
            <h4>+506 7777-8888</h4>
            <p class="derechos">DERECHOS RESERVADOS</p>
        </div>     

        <script>
            function muestra() {
              // Código ejecutado al hacer click sobre el botón
              var textoOculto = document.getElementById("nuevo-autor");
              textoOculto.classList.remove("oculto");
            }

            function muestra2() {
            // Código ejecutado al hacer click sobre el botón
            var textoOculto = document.getElementById("editar-autor");
            textoOculto.classList.remove("oculto");
            }

            function cargarTabla() {
            fetch("http://localhost:5000/autores/")
                .then(
                    function (response) {
                        return response.json();
                    }
                )
                .then(
                    function (json) {
                        for (var cont = 0; json.length > cont; cont++) {
                            var linea = "<tr><td>"+json[cont]._id+"</td><td>"+json[cont].nombreCompleto+"</td><td>"+json[cont].paisNacimiento+"</td><td>"+json[cont].genero+"</td><td>"+json[cont].librosPublicados+"</td><td>"+json[cont].premios+"</td><td><button onclick='muestra2()'>EDITAR</button></td></tr>";
                            document.getElementById("librosAgregados").insertAdjacentHTML("beforeend", linea);
                        }
                    }
                )
        }

            function insertarAutor() {
                var datos = {
                nombreCompleto: document.getElementById("nombreCompleto").value,
                paisNacimiento: document.getElementById("paisNacimiento").value,
                fechaNacimiento: document.getElementById("fechaNacimiento").value,
                fechaDefuncion: document.getElementById("fechaDefuncion").value,
                genero: document.getElementById("genero").value,
                librosPublicados: document.getElementById("librosPublicados").value,
                premios: document.getElementById("premios").value,
                nobelFecha: document.getElementById("nobelFecha").value,
                imagen: document.getElementById("imagen").value,
                resena: document.getElementById("resena").value
                }
                
                fetch("http://localhost:5000/autores/insertar", {
                method: 'POST',
                body: JSON.stringify(datos),
                headers: {'Content-Type': 'application/json'}
                })
                .then(
                    function(response){
                    return response.json();
                    }
                )
            }

            function actualizarAutor() {
            var datos = {
                _id: document.getElementById("_id").value,
                nombreCompleto: document.getElementById("nombreCompleto2").value,
                paisNacimiento: document.getElementById("paisNacimiento2").value,
                fechaNacimiento: document.getElementById("fechaNacimiento2").value,
                fechaDefuncion: document.getElementById("fechaDefuncion2").value,
                genero: document.getElementById("genero2").value,
                librosPublicados: document.getElementById("librosPublicados2").value,
                premios: document.getElementById("premios2").value,
                nobelFecha: document.getElementById("nobelFecha2").value,
                imagen: document.getElementById("imagen2").value,
                resena: document.getElementById("resena2").value
            }

            fetch("http://localhost:5000/autores/actualizar", {
                method: 'POST',
                body: JSON.stringify(datos),
                headers: { 'Content-Type': 'application/json' }
            })
                .then(
                    function (response) {
                        return response.json();
                    }
                )
        }

          </script>
    </body>
</html>