<html>
    <head>
        <title>Catálogo Descuentos</title>
        <link rel="stylesheet" type="text/css" href="CSS/catalogo_descuentos.css"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/31355f9613.js" crossorigin="anonymous"></script>
    </head>

    <body onload="cargarTabla()">

        <!-- Logo y Menu -->
        <div class="contenedor">
            <div class="logo-menu" >
                <a href="index.html"><img class="logo" src="img/logo.png"/></a>
            </div>

            <div class="menu-top">
                <a href="sobreNosotros.html">SOBRE NOSOTROS</a>
                <a href="display_libros.html">LIBROS</a>
                <a href="socios_comerciales.html">SOCIOS COMERCIALES</a>
                <a href="formulario_cliente_frecuente.html">CLIENTE FRECUENTE</a>
                <a href="iniciar_sesion.html">INICIAR SESIÓN</a>
                <a href="preguntasFrecuentes.html">PREGUNTAS FRECUENTES</a>
                <a href="contacto.html">CONTACTO</a>
            </div>
        </div>

        <!-- Busqueda, Perfil y Carrito -->

        <div class="button">
            <a class="button2" href="perfil_admin.html"><i class="fa-solid fa-user"></i></a>
        </div>

        <!-- Título -->
        <div class="titulo">
            <h1>DESCUENTOS Y PROMOCIONES</h1>
        </div>

        <!-- Descuentos agregados -->
        <div class="libros">
            <div>
                <table class="center" id="descuentosAgregados">
                    <tr>
                      <td class="tabla-titulos">ID</td>
                      <td class="tabla-titulos">DESCUENTO</td>
                      <td class="tabla-titulos">PORCENTAJE</td>
                      <td class="tabla-titulos">EDITAR</td>
                    </tr>
                  </table>
            </div>

            <!-- Boton -->

            <div class="agregar">
                <button onclick="muestra()" class="button-sesion">AGREGAR NUEVO DESCUENTO</button>
            </div>
        </div>

        <!-- NUEVO DESCUENTO -->

        <div id="nuevo-descuento" class=" oculto nuevo-libro">
            <!-- Título -->
            <div class="titulo2">
                <h1>NUEVO DESCUENTO</h1>
            </div>

            <!--  -->

            <form class="crear-cuenta" action="perfil_cliente.html" onsubmit= "">

                <input type="text" id="nombre" placeholder="NOMBRE" class="inputs"> <br><br/>
                
                <input type="text" id="apellidos" placeholder="PORCENTAJE" class="inputs"> <br><br/>
                
                <label class="text-morado" for="genero">SELECCIONAR GÉNERO</label><br>
                <select class="select" id="genero">
                    <option></option>
                    <option>ARTE</option>
                </select><br><br/>

                <label class="text-morado" for="genero">SELECCIONAR LIBROS</label><br>
                <select class="select" id="genero">
                    <option></option>
                    <option>ARTE</option>
                </select><br><br/>

                <button class="button-crear">AGREGAR</button>
            </form>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="social">
                <img class="logos-social" src="img/facebook.png"/> 
                <img class="logos-social"src="img/instagram.png"/> 
                <img class="logos-social" src="img/twitter.png"/> 
            </div>
            <h4>LIBRERIA@HOTMAIL.COM</h4>
            <h4>+506 7777-8888</h4>
            <p class="derechos">DERECHOS RESERVADOS</p>
        </div>     

        <script>
            function muestra() {
              // Código ejecutado al hacer click sobre el botón
              var textoOculto = document.getElementById("nuevo-descuento");
              textoOculto.classList.remove("oculto");
            }

            function cargarTabla() {
            fetch("http://localhost:5000/descuentos/")
                .then(
                    function (response) {
                        return response.json();
                    }
                )
                .then(
                    function (json) {
                        for (var cont = 0; json.length > cont; cont++) {
                            var linea = "<tr><td>"+json[cont]._id+"</td><td>"+json[cont].nombreDescuento+"</td><td>"+json[cont].porcentaje+"</td><td><button onclick='muestra2()'>EDITAR</button></td></tr>";
                            document.getElementById("descuentosAgregados").insertAdjacentHTML("beforeend", linea);
                        }
                    }
                )
        }

        </script>

    </body>
</html>